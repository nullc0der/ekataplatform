webpackJsonp([1],{Plhk:function(e,t,r){t=e.exports=r("lcwS")(!1),t.push([e.i,'.eCo4Jw0uudrYMCRblWzOv{color:inherit;padding:24px;margin-bottom:50px}@media only screen and (max-width:767px){.eCo4Jw0uudrYMCRblWzOv{padding-bottom:100px}}._20b8cwCO_5-0o3v8cMpApt,.exbXgFYjpSmagmzxlFCXA{background-color:#fff}._20b8cwCO_5-0o3v8cMpApt{position:relative;z-index:100;flex:1;box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24);border-width:1px 1px 1px 0;border-radius:0 3px 3px 0}@media only screen and (max-width:767px){._20b8cwCO_5-0o3v8cMpApt{position:fixed;left:100vw;right:0;bottom:0;top:109px;width:100vw;z-index:300;border-width:1px;transition:left .16s ease-in-out;will-change:left}._20b8cwCO_5-0o3v8cMpApt.is-open{left:0}}@media only screen and (min-width:767px){._20b8cwCO_5-0o3v8cMpApt .mobile-close-chat{display:none}}._20b8cwCO_5-0o3v8cMpApt .header-options .ui-button{border:none;margin-right:-12px;border-radius:50%;overflow:hidden;height:38px;width:38px;padding-top:1px}._20b8cwCO_5-0o3v8cMpApt .chatview-header{height:60px;position:relative;padding:0 20px}._20b8cwCO_5-0o3v8cMpApt .chatview-header .text-session-id{position:absolute;top:18px;left:20px}@media only screen and (max-width:767px){._20b8cwCO_5-0o3v8cMpApt .chatview-header .text-session-id{display:none}}._20b8cwCO_5-0o3v8cMpApt .chatview-header .text-username{font-weight:600;font-size:16px}._20b8cwCO_5-0o3v8cMpApt .chatview-body{min-height:250px;overflow-y:auto;padding:20px;background-color:#f2f2f2}._20b8cwCO_5-0o3v8cMpApt .chatview-body:after{content:"";display:block;clear:both}._20b8cwCO_5-0o3v8cMpApt .chat-body-item{border-radius:2px;width:auto;float:right;clear:both;margin-bottom:12px;padding:3px 8px;cursor:default;transform-origin:center center;transition:all .12s ease}._20b8cwCO_5-0o3v8cMpApt .chat-body-item.in-left{float:left}._20b8cwCO_5-0o3v8cMpApt .chat-body-item:hover{transform:scale(1.05)}._20b8cwCO_5-0o3v8cMpApt .img-chat-avatar{width:24px;height:24px}.exbXgFYjpSmagmzxlFCXA{position:relative;z-index:400;width:250px;border-radius:3px 0 0 3px;box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24)}@media only screen and (max-width:767px){.exbXgFYjpSmagmzxlFCXA{position:fixed;left:0;right:0;bottom:0;top:109px;width:100vw;z-index:100}}.exbXgFYjpSmagmzxlFCXA .search-box{height:60px;padding:12px}.exbXgFYjpSmagmzxlFCXA .search-control{border:1px solid rgba(0,0,0,.1);width:100%;height:36px;padding:2px 6px;outline:none;background-color:#fff}.exbXgFYjpSmagmzxlFCXA .search-control:focus,.exbXgFYjpSmagmzxlFCXA .search-control:hover{border-color:#03a9f4}.exbXgFYjpSmagmzxlFCXA .items-list{overflow-x:hidden}.exbXgFYjpSmagmzxlFCXA .chat-sidebar-item{cursor:pointer;padding:12px;display:flex;align-items:center;background-color:#fff;position:relative;z-index:100;transform-origin:center center;transition:all .16s ease;will-change:transform,box-shadow;color:rgba(0,0,0,.24)}.exbXgFYjpSmagmzxlFCXA .chat-sidebar-item.is-active,.exbXgFYjpSmagmzxlFCXA .chat-sidebar-item:hover{transform:scale(1.05);border-width:0;color:#4f4f4f}.exbXgFYjpSmagmzxlFCXA .chat-sidebar-item:hover{box-shadow:0 0 12px 2px rgba(0,0,0,.12);z-index:200}.exbXgFYjpSmagmzxlFCXA .chat-sidebar-item.is-active{z-index:300;background-color:#f2f2f2}.exbXgFYjpSmagmzxlFCXA .chat-sidebar-item .item-image{width:42px;height:42px;flex-shrink:0;margin-right:16px}.exbXgFYjpSmagmzxlFCXA .chat-sidebar-item .item-details{flex:1;font-size:12px}.exbXgFYjpSmagmzxlFCXA .chat-sidebar-item .item-username{font-weight:600;font-size:14px;margin-bottom:-5px}.exbXgFYjpSmagmzxlFCXA .chat-sidebar-item .unread-count{margin-left:4px}.exbXgFYjpSmagmzxlFCXA .chat-sidebar-item .online-status{position:relative;padding-left:12px;width:50px}.exbXgFYjpSmagmzxlFCXA .chat-sidebar-item .online-status:before{position:absolute;top:7px;left:0;content:"";width:8px;height:8px;border-radius:50%;background-color:rgba(0,0,0,.24)}.exbXgFYjpSmagmzxlFCXA .chat-sidebar-item .online-status.is-online:before{background-color:#4caf50}.exbXgFYjpSmagmzxlFCXA .chat-sidebar-item .online-status.is-away:before{background-color:#ff9800}',""]),t.locals={container:"eCo4Jw0uudrYMCRblWzOv",chatView:"_20b8cwCO_5-0o3v8cMpApt",sidebar:"exbXgFYjpSmagmzxlFCXA"}},WJWp:function(e,t,r){"use strict";(function(e){function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var n=r("CwoH"),o=(r.n(n),r("9qb7")),a=r.n(o),i=r("G3/1"),s=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),c=function(t){function ChatSidebarItem(){return _classCallCheck(this,ChatSidebarItem),_possibleConstructorReturn(this,(ChatSidebarItem.__proto__||Object.getPrototypeOf(ChatSidebarItem)).apply(this,arguments))}return _inherits(ChatSidebarItem,t),s(ChatSidebarItem,[{key:"render",value:function(){var t=this.props,r=t.selected,n=void 0!==r&&r,o=t.username,s=void 0===o?"":o,c=t.is_online,l=void 0!==c&&c,p=t.num_unread,u=void 0===p?"":p,d=t.image,f=void 0!==d&&d,h=t.avatar_color,m=void 0===h?"":h,b=a()("chat-sidebar-item",{"is-active":n}),g=l?"Online":"Offline",x="is-"+g;return e.createElement("div",{className:b,onClick:this.props.onClick},e.createElement("div",{className:"item-image rounded"},f?e.createElement("img",{className:"img-responsive",src:f}):e.createElement(i.a,{name:s,bgcolor:m,fontsize:"2em"})),e.createElement("div",{className:"item-details"},e.createElement("div",{className:"item-username"}," ",s," "),e.createElement("div",{className:"item-status flex-horizontal a-center"},e.createElement("div",{className:"flex-1 online-status "+x}," ",g," "),e.createElement("div",{className:"unread-count"},u," Unread"))))}}]),ChatSidebarItem}(n.Component);t.a=c}).call(t,r("CwoH"))},WsyS:function(e,t,r){"use strict";(function(e){function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var n=r("CwoH"),o=(r.n(n),r("5D9O")),a=(r.n(o),r("9qb7")),i=r.n(a),s=r("fB6q"),c=r.n(s),l=r("WJWp"),p=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),u=function(t){function Sidebar(){return _classCallCheck(this,Sidebar),_possibleConstructorReturn(this,(Sidebar.__proto__||Object.getPrototypeOf(Sidebar)).apply(this,arguments))}return _inherits(Sidebar,t),p(Sidebar,[{key:"render",value:function(){var t=this,r=this.props,n=r.selected,o=void 0===n?null:n,a=r.hasErrored,s=void 0!==a&&a,p=r.className,u=r.items,d=void 0===u?[]:u,f=i()(c.a.sidebar,p,"flex-vertical"),h=d.reduce(function(e,t,r){return t.id===o?r:e},-1);return e.createElement("div",{className:f},e.createElement("div",{className:"search-box"},e.createElement("input",{type:"search",className:"search-control",placeholder:"Search Users/Groups",onChange:this.props.onSearchChange})),e.createElement("div",{className:"items-list scroll-y flex-1"},s&&e.createElement("p",null,"Error loading chats"),d.map(function(r,n){return e.createElement(l.a,{key:n,selected:h===n,onClick:function(e){return t.props.onItemClick(r.id)},username:r.username,image:r.user_image_url,avatar_color:r.user_avatar_color,is_online:r.is_online,num_unread:r.unread_count})})))}}]),Sidebar}(n.Component);t.a=u}).call(t,r("CwoH"))},dYxx:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var n=r("CwoH"),o=(r.n(n),r("5D9O")),a=r.n(o),i=r("9qb7"),s=r.n(i),c=r("jYI/"),l=r("g03I"),p=r.n(l),u=r("fB6q"),d=r.n(u),f=r("WsyS"),h=r("vtyD"),m=r("OUuH"),b=r("XJFe"),g=(r.n(b),r("0ub6"),function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}()),x=function(t){function Messenger(){var e,t,r,n;_classCallCheck(this,Messenger);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return t=r=_possibleConstructorReturn(this,(e=Messenger.__proto__||Object.getPrototypeOf(Messenger)).call.apply(e,[this].concat(a))),r.componentDidMount=function(){r.props.fetchData("/api/messaging/chatrooms/")},r.onSidebarChatSelect=function(e){r.props.selectRoom(e),$("."+d.a.chatView).toggleClass("is-open")},r.onSearchInputChange=function(e){r.props.changeSearchText(e.target.value)},r.getTitle=function(e,t){var r=!0,n=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var s=a.value;if(s.id===t)return s.username}}catch(e){n=!0,o=e}finally{try{!r&&i.return&&i.return()}finally{if(n)throw o}}},n=t,_possibleConstructorReturn(r,n)}return _inherits(Messenger,t),g(Messenger,[{key:"render",value:function(){var t=this.props,r=t.className,n=t.rooms,o=t.selected,a=t.hasErrored,i=s()(d.a.container,r,"flex-horizontal","a-stretch","flex-1");this.getTitle(n,o);return e.createElement("div",{className:i},e.createElement(f.a,{selected:o,hasErrored:a,onItemClick:this.onSidebarChatSelect,onSearchChange:this.onSearchInputChange,items:n}),e.createElement(h.a,{title:this.getTitle(n,o)}))}}]),Messenger}(n.Component);x.propTypes={rooms:a.a.array.isRequired,areLoading:a.a.bool.isRequired,hasErrored:a.a.bool.isRequired,selected:a.a.number.isRequired,fetchData:a.a.func.isRequired,selectRoom:a.a.func.isRequired,changeSearchText:a.a.func.isRequired};var v=function(e,t){return t?e.filter(function(e){return e.username.toLowerCase().startsWith(t.toLowerCase())}):e},C=function(e){return{rooms:v(e.ChatRooms.rooms,e.ChatRooms.searchText),selected:e.ChatRooms.selected,areLoading:e.ChatRooms.areLoading,hasErrored:e.ChatRooms.hasErrored}},w=function(e){return{fetchData:function(t){return e(r.i(m.a)(t))},selectRoom:function(t){return e(r.i(m.b)(t))},changeSearchText:function(t){return e(r.i(m.c)(t))}}};t.default=p()(d.a)(r.i(c.connect)(C,w)(x))}.call(t,r("CwoH"))},fB6q:function(e,t,r){var n=r("Plhk"),o=r("yW9T");"string"==typeof n&&(n=[[e.i,n,""]]),e.exports=n.locals||{},e.exports._getContent=function(){return n},e.exports._getCss=function(){return n.toString()},e.exports._insertCss=function(e){return o(n,e)}},vtyD:function(e,t,r){"use strict";(function(e){function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var n=r("CwoH"),o=(r.n(n),r("5D9O")),a=r.n(o),i=r("9qb7"),s=r.n(i),c=r("jYI/"),l=r("fB6q"),p=r.n(l),u=r("lPK4"),d=r("Zsk6"),f=r("8Pfj"),h=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),m=function(t){function ChatView(){var e,t,r,n;_classCallCheck(this,ChatView);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return t=r=_possibleConstructorReturn(this,(e=ChatView.__proto__||Object.getPrototypeOf(ChatView)).call.apply(e,[this].concat(a))),r.componentDidUpdate=function(e,t){if(e.selected!==r.props.selected){var n="/api/messaging/chat/"+r.props.selected+"/";r.props.fetchData(n)}r.scrollToBottom()},r.scrollToBottom=function(){r.messagesEnd.scrollIntoView({behavior:"smooth"})},r.closeChatView=function(){$("."+p.a.chatView).toggleClass("is-open")},r.sendDemoChat=function(e){var t=$(".chat-input-box").val(),r=$("<div/>",{class:"chat-body-item"}).text(t);$(".chatview-body").append(r),r.get(0).scrollIntoView()},n=t,_possibleConstructorReturn(r,n)}return _inherits(ChatView,t),h(ChatView,[{key:"componentDidMount",value:function(){this.scrollToBottom()}},{key:"render",value:function(){var t=this,r=this.props,n=r.className,o=r.chats,a=r.title,i=s()(p.a.chatView,n,"flex-vertical");return e.createElement("div",{className:i},e.createElement("div",{className:"chatview-header flex-horizontal a-center"},e.createElement("div",{className:"text-username text-center flex-1"}," ",a," "),e.createElement("div",{className:"header-options"},e.createElement("div",{className:"btn btn-default ui-button"},e.createElement("i",{className:"fa fa-ellipsis-v"})),e.createElement("div",{onClick:this.closeChatView,className:"btn btn-default btn-chat ui-button mobile-close-chat"},e.createElement("i",{className:"fa fa-remove"})))),e.createElement("div",{className:"chatview-body flex-1"},o.map(function(t,r){return e.createElement(u.a,{key:r,user:t.user,message:t.message,stamp:new Date(t.timestamp),left:t.user.username!==window.django.user.username})}),e.createElement("div",{style:{float:"left",clear:"both"},ref:function(e){t.messagesEnd=e}})),e.createElement(d.a,null))}}]),ChatView}(n.Component);m.propTypes={chats:a.a.array.isRequired,selected:a.a.number.isRequired,areLoading:a.a.bool.isRequired,hasErrored:a.a.bool.isRequired,fetchData:a.a.func.isRequired};var b=function(e){return{chats:e.Chat.chats,selected:e.ChatRooms.selected,areLoading:e.Chat.areLoading,hasErrored:e.Chat.hasErrored}},g=function(e){return{fetchData:function(t){return e(r.i(f.b)(t))}}};t.a=r.i(c.connect)(b,g)(m)}).call(t,r("CwoH"))}});